"""
Base prompt containing note.com markdown rules.
Platform-specific formatting guidelines for optimal note.com rendering and readability.
"""

NOTE_MARKDOWN_RULES = """# note.comマークダウン対応規仕様 - 完全ガイド

## サポートされているマークダウン記法（対応）

note.comは以下のマークダウン記法に**完全対応**しています。これ以外の記法は無視されるか、プレーンテキストとして表示されます：

### 見出し（Headings）
- **大見出し（h2）**: `## ` （シャープ2つ + 半角スペース）
  - 例：`## セクションの開始`
  - 用途：記事の主要セクション区切り

- **中見出し（h3）**: `### ` （シャープ3つ + 半角スペース）
  - 例：`### サブセクション`
  - 用途：大見出し内の詳細な項目分け

### リスト（Lists）
- **箇条書き（Unordered List）**: `- ` （ハイフン + 半角スペース）
  - 例：`- ポイント1` `- ポイント2`
  - 特性：複数行の場合、自動的にリスト構造を保持
  - ネスト（インデント）はサポートされていない（フラット構造のみ）

### テキスト強調（Text Styling）
- **太字**: `**テキスト**` （アスタリスク2つで囲む）
  - 例：`**重要なキーワード**`
  - 用途：強調したい単語やフレーズ
  - 互換性：`__テキスト__` （アンダースコア2つ）も対応

---

## サポートされていない記法（非対応）

以下の記法はnote.comでは機能しません。使用すると、プレーンテキストとして表示されるため、意図した装飾が失われます：

### 絶対に使用してはいけない記法
1. **h1見出し（`#`）**
   - 理由：note.comはタイトルを別途管理するため、記事内のh1は処理されない
   - 代わりに：h2（`##`）を最上位の見出しとして使用

2. **h4以上の見出し（`####`, `#####` など）**
   - 理由：note.comのレンダリング対象外
   - 代わりに：h3（`###`）で十分な階層構造を実現可能

3. **番号付きリスト（Ordered List）**
   - 記法：`1. ` `2. ` `3. ` （数字 + ドット + スペース）
   - 理由：note.comではプレーンテキストとして表示される
   - 代わりに：箇条書き（`- `）を使用するか、テキストで「ステップ1」「ステップ2」と明記

4. **ネスト（インデント）リスト**
   - 記法：` - ` （スペース + ハイフン）
   - 理由：インデント構造は無視される
   - 代わりに：フラットな箇条書き、または見出しで階層を表現

5. **コードブロック**
   - 記法：``` ```（バッククォート3つ）で囲む
   - 記法：`インラインコード`（バッククォート1つ）
   - 理由：note.comはコード記法をサポートしない
   - 代わりに：重要なコマンドやテキストは**太字**で強調するか、引用符で囲む

6. **リンク**
   - 記法：`[テキスト](URL)`
   - 理由：マークダウンのリンク構文は機能しない
   - 代わりに：URLを直接テキストに記載（ブラウザが自動的にリンク化することがある）

7. **斜体・イタリック**
   - 記法：`*テキスト*` または `_テキスト_` （シングルで囲む）
   - 理由：イタリック表現はnote.comでは対応外
   - 代わりに：**太字**で強調するか、そのままプレーンテキスト

8. **水平線・区切り線**
   - 記法：`---` `***` `___`
   - 理由：note.comレンダリング対象外
   - 代わりに：空行（改行）で視覚的な区切りを作成

9. **引用ブロック**
   - 記法：`> テキスト`
   - 理由：非対応
   - 代わりに：セクションを見出しで明確に分ける

10. **テーブル**
    - 記法：マークダウンのテーブル記法全般
    - 理由：note.comはテーブル機能を持たない
    - 代わりに：`- ` 箇条書きで行をシミュレート

---

## 出力形式の厳格な仕様

### タイトル（Title）
- **位置**：最初の出力行（見出し記号なし）
- **文字数**：**30文字以内（必須）**
  - note.comのフィードで完全に表示される最大文字数
  - 31文字以上は省略表示される可能性あり
  - 実際には25-28文字が理想的（スマートフォン表示を考慮）

- **形式**：プレーンテキストのみ（マークダウン記号一切不可）
  - ✓ 良い例：`失敗から学んだ、本当の価値観の話`
  - ✗ 悪い例：`## 失敗から学んだ、本当の価値観の話`
  - ✗ 悪い例：`**失敗**から学んだ、本当の価値観の話` （タイトルに装飾は不可）

### 本文（Body）
- **形式**：マークダウン形式（ただし上述のサポート記法のみ）
- **コードブロック囲い**：`markdown`、`` ` `` 等で囲まない
  - ✓ 良い例：直接マークダウンを記述
  - ✗ 悪い例：`` ```markdown `` で囲む（プレーンテキストとして表示される）

---

## 改行と空行の最適化ガイド

note.comはスマートフォンでの読みやすさを重視するプラットフォームです。視覚的なリズムの作成が重要：

### 段落の区切り
- **推奨**：2-3文ごとに1行の空行を挿入
- **理由**：スマートフォン画面での「見た目の休息」を提供、読了率向上
- **注意**：連続した空行（2行以上）は避ける（デザイン的に不自然）

### 見出しの前後
- **推奨**：大見出し（`##`）の前後に必ず空行を挿入
- **推奨**：中見出し（`###`）の前は空行、後は1行で本文開始
- **理由**：見出しの視認性向上、セクション区分の明確化

### リスト周辺
- **推奨**：箇条書き前後に空行を挿入
- **推奨**：箇条書きの最後から本文再開前に空行を1つ
- **理由**：リスト項目のグループ感を強調

### 強調テキスト（太字）
- **推奨**：重要な単語・フレーズを太字化
- **推奨**：核心的なメッセージの前後に空行を配置
- **注意**：連続した太字は避ける（強調効果が減弱）

---

## プラットフォーム特性と実装の注意点

### 文字エンコーディング
- **対応**：UTF-8（日本語全て対応）
- **特殊記号**：`・`（中点）、`「」`（かぎかっこ）も正常に表示

### 特殊文字の処理
- `&` や `<` `>` は個別に処理が必要な場合あり
  - 安全性のため、`&` は `&` のままでよい（note.comが自動処理）
  - `<` `>` を使いたい場合は「より小さい」「より大きい」など日本語で記述

### パフォーマンス考慮事項
- 推奨文字数：2000-3000文字（最適な読了時間5-10分）
- 最大推奨：5000文字（それ以上は別記事への分割を検討）
- 見出しの数：5-8個が目安（セクション数が多すぎるとスキャン読み困難）

---

## チェックリスト（公開前の確認）

出力前に以下を**必ず確認**してください：

- [ ] タイトルが見出し記号なしで最初の行に配置されているか
- [ ] タイトルが30文字以内か
- [ ] `##` と `###` の後に半角スペースが1つあるか
- [ ] h1（`#`）やh4以上（`####`）が含まれていないか
- [ ] 番号付きリスト（`1. 2. 3.`）が含まれていないか
- [ ] コードブロック（`` ``` ``）が含まれていないか
- [ ] リンク記法（`[]()`）が含まれていないか
- [ ] 斜体（`*テキスト*`）が含まれていないか
- [ ] 段落が2-3文ごとに改行・空行で区切られているか
- [ ] 大見出し前後に空行があるか
- [ ] 最後の行に余計な改行が含まれていないか

---

## 最後に

note.comに最適化された記事を生成することで、以下が実現します：

- ✓ 読者のスマートフォン体験が向上
- ✓ フィードでのクリック率向上（タイトル30文字の最適化）
- ✓ 記事内での読了率向上（視覚的リズムの重要性）
- ✓ プラットフォームのレンダリングエラーを排除
- ✓ クリエイターの意図した装飾・強調が確実に反映

細部への配慮が、最終的な読者体験を決定します。
"""
